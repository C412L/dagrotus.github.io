<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="FYUsHzPtOlUgL5sFcigdZlCBy6ev-CBzCPFvmC0WQ4o" />
    <title>LoR Deck Name Editor</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon"> 

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-color/2.7.1/vue-color.min.js"></script>
    <script src="js/data.js"></script>
    <link rel="stylesheet" href="css/site.css">
    <link rel="stylesheet" href="css/v-color.css">
</head>
<body class="container-lg mb-3">    
    <div id="app">
        <div id="header" class="text-center mb-3 d-md-block d-none">
            <img id="header-logo" src="img/assets/Logo_LOR_Title_crispmip.png" width="300" class="mt-3">
            <div id="header-title">DECK NAME EDITOR</div>
        </div>
        <div id="tools" class="mb-3 d-flex flex-wrap justify-content-lg-start justify-content-center">
            <div class="typography-button-wrapper typography-button-bold-wrapper">
                <button type="button" class="typography-button typography-button-bold tool-button" title="Bold text" @click="clickApplyTypographyStyle('b')"><b>B</b></button>
            </div>
            <div class="typography-button-wrapper typography-button-italic-wrapper">
                <button type="button" class="typography-button typography-button-italic tool-button" title="Italic text" @click="clickApplyTypographyStyle('i')"><i>I</i></button>
            </div>
            <div class="typography-button-wrapper typography-button-underline-wrapper">
                <button type="button" class="typography-button typography-button-underline tool-button" title="Underlined text" @click="clickApplyTypographyStyle('u')"><u>U</u></button>
            </div>
            <div class="typography-button-wrapper typography-button-strike-wrapper">
                <button type="button" class="typography-button typography-button-strike tool-button" title="Text with line through" @click="clickApplyTypographyStyle('s')"><s>S</s></button>
            </div>
            <div class="typography-button-wrapper typography-button-sub-wrapper">
                <button type="button" class="typography-button typography-button-sub tool-button" title="Subscript text" @click="clickApplyTypographyStyle('sub')">X<sub>2</sub></button>
            </div>
            <div class="typography-button-wrapper typography-button-sup-wrapper">
                <button type="button" class="typography-button typography-button-sup tool-button" title="Superscript text" @click="clickApplyTypographyStyle('sup')">X<sup>2</sup></button>
            </div>
            <div class="typography-button-wrapper typography-button-marked-wrapper">
                <button type="button" class="typography-button typography-button-marked tool-button" title="Marked text" @click="clickApplyTypographyStyle('mark')"><mark>M</mark></button>
            </div>
            <div class="dropdown-button-wrapper">                
                <button type="button" 
                        class="dropdown-button tool-button d-none d-lg-block"
                        @click="toggleMenu(menuStates.dropdownSprites)"
                        title="Sprite palette">Sprites</button>
                <div v-if="showDropdownSprites" id="dropdown-sprites" class="dropdown-content">
                    <sprite-palette :sprites="sprites"
                                    :clickfn="clickSprite">
                    </sprite-palette>
                </div>
                <button type="button" 
                        class="dropdown-button tool-button d-lg-none" 
                        data-toggle="modal" 
                        @click="toggleMenu(menuStates.modalSprites)">
                    Sprites
                </button>
            </div>
            <div class="dropdown-button-wrapper">                
                <button type="button" 
                        class="dropdown-button tool-button d-none d-lg-block"
                        @click="toggleMenu(menuStates.dropdownColors)"
                        title="Color picker">Colors</button>
                <div v-if="showDropdownColors" id="dropdown-colors" class="dropdown-content">
                    <div class="menu-color-picker">
                        <sketch-picker :value="color" 
                                       :preset-colors="swatches" 
                                       ref="colorPicker"
                                       :preserve-color="preserveColor">
                        </sketch-picker>
                    </div>
                    <div class="d-flex justify-content-center p-1 add-color-button-wrapper">
                        <button type="button" 
                                class="add-color-button add-short-hex-button m-1" 
                                @click="clickAddColor(true)"
                                title="Color represented in short HEX value(#fff)">Add short HEX</button>
                        <button type="button" 
                                class="add-color-button add-hex-button m-1"
                                @click="clickAddColor(false)"
                                title="Color represented in full HEX value(#fff000)">Add full HEX</button>
                    </div>
                </div>
                <button type="button" 
                        class="dropdown-button tool-button d-lg-none" 
                        data-toggle="modal" 
                        @click="toggleMenu(menuStates.modalColors)">
                    Colors
                </button>
            </div>
        </div>     
        <div id="input">
            <textarea id="input-text-area" rows="2" class="form-control" v-model="input" spellcheck="false"></textarea>
            <div id="input-text-area-counter">
                {{input.length}}
            </div>
        </div>
        <div id="preview" class="my-3">
            <div id="preview-short" class="p-2 preview-presentation-wrapper mb-3">             
                <div class="preview-header">
                    <div class="preview-header-title px-2">Preview</div>
                </div>
                <div class="mt-2 px-2 d-flex flex-wrap align-items-start preview-presentation" v-html="preview"></div>
            </div>
            <div id="preview-full" class="p-2 preview-presentation-wrapper">                
                <div class="preview-header">
                    <div class="preview-header-title px-2">Full preview (ignoring 50 character limit)</div>
                </div>
                <div class="mt-2 px-2 d-flex flex-wrap align-items-start preview-presentation" v-html="previewFull"></div>
            </div>
        </div>
    
        <div v-if="showModalSprites" class="menu-modal" 
             tabindex="-1" 
             role="dialog" 
             aria-labelledby="" 
             aria-hidden="true">
            <div class="menu-modal-centered" role="document">
                <div class="menu-modal-content">
                    <div class="d-flex justify-content-center">
                        <sprite-palette :sprites="sprites"
                                        :clickfn="clickSprite">
                        </sprite-palette>
                    </div>       
                </div>
            </div>
        </div>

        <div v-if="showModalColors" class="menu-modal" 
             tabindex="-1" 
             role="dialog" 
             aria-labelledby="" 
             aria-hidden="true">
            <div class="menu-modal-centered" role="document">
                <div class="menu-modal-content">
                    <div class="">
                        <div class="menu-color-picker">
                            <chrome-picker :value="color" 
                                       ref="colorPicker"
                                       :preserve-color="preserveColor"
                                       :disable-fields="true">
                            </chrome-picker>
                        </div>
                        <div class="d-flex justify-content-center p-1 add-color-button-wrapper">
                            <button type="button" 
                                    class="add-color-button add-short-hex-button m-1" 
                                    @click="clickAddColor(true)"
                                    title="Color represented in short HEX value(#fff)">Add short HEX</button>
                            <button type="button" 
                                    class="add-color-button add-hex-button m-1"
                                    @click="clickAddColor(false)"
                                    title="Color represented in full HEX value(#fff000)">Add full HEX</button>
                        </div>                       
                    </div>       
                </div>
            </div>
        </div>
    </div>

    <template id="sprite-palette-template">
        <div class="sprite-palette">
            <div class="d-flex sprite-row" v-for="spriteRow in spriteRows">
                <span v-for="sprite in spriteRow">
                    <button class="sprite-button p-1"
                            @click="clickfn(sprite)"
                            :title="sprite.title">
                        <img :src="sprite.image" width="40" height="40" >
                    </button>
                </span>
            </div> 
        </div>     
    </template>
    <script src="js/app.js"></script>
</body>
</html>